{% extends "base_generic.html" %}

{% block content %}
    <h1>Title: {{ blog.title }}</h1>

    <p><strong>Author:</strong> <a href="{{blog.author.blogger.get_absolute_url}}">{{ blog.author }}</a></p>
    <p><strong>Created at:</strong> {{ blog.time_of_creation }}</p>
    <p><strong>Content:</strong> {{ blog.content }}</p>

    {% if user.is_authenticated and user.username == blog.author.username %}
        <a href="{% url 'blog-update' blog.id %}">Edit This Blog</a></p>
        <a href="{% url 'blog-delete' blog.id %}">Delete This Blog</a></p>
    {% endif %}

    <div style="margin-left: 20px; margin-top: 20px;">
        <h4>Comments</h4>

        {% for comment in blog.comment_set.all %}
            <hr>
            <p>{{ comment }}</p>
        {% endfor %}

        {% if user.is_authenticated %}
            <a href="{% url 'blog-comment' blog.id %}">Add a new comment</a></p>
        {% else %}
            <p><a href="{% url 'login'%}?next={{request.path}}">Login</a> to add a new comment</p>
        {% endif %} 

    
    </div>
{% endblock %}